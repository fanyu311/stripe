{% extends 'base.html.twig' %}

{% block body %}
	<!--Main layout-->
	<main class="pt-5 mx-lg-5">
		<div class="container-fluid mt-5">
			<div class="card mb-4 wow fadeIn">
				<div class="card-body d-sm-flex justify-content-between">
					<h4 class="mb-2 mb-sm-0 pt-1">
						<span>
							Historique des commandes  -  Total des commandes :
							<b>{{ sumOrder|number_format(2, ',', '.') }}
								€</b>
						</span>
					</h4>
				</div>
			</div>

			<div class="row text-center wow fadeIn" style="visibility: visible; animation-name: fadeIn;">
				<div class="col-md-12 mb-4">
					<div class="card">
						<div class="card-body">
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th scope="col">Reference</th>
										<th scope="col">Produit</th>
										<th scope="col">Prix</th>
										<th scope="col">Brand</th>
										{# <th scope="col">{{ 'order.last4Stripe'|trans }}</th> #}
										<th scope="col">Status</th>
										<th scope="col">Date Created</th>
										<th scope="col">Action</th>


									</tr>
								</thead>
								<tbody>
									{% for order in orders %}
										<tr>

											<td>{{ order.reference }}</td>
											<td>{{ order.product.name }}</td>
											<td>{{ order.price|number_format(2, ',', '.')  }}
												€</td>
											<td>{{ order.brandStripe }}</td>
											{# <td>{{ order.last4Stripe }}</td> #}
											<td>
												<span class="badge bg-secondary">{{ order.statusStripe }}</span>
											</td>
											<td>{{ order.createdAt|date('l d/m/Y h:i:s') }}</td>
											<td>
												<form action="{{ path('app.orders.cancelorder') }}" method="POST" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet article ?')">
													<input type="hidden" name="id" value="{{ order.id }}">
													<input type="hidden" name="token" value="{{ csrf_token('delete' ~ order.id) }}">
													<button type="submit" class="btn btn-danger">Supprimer</button>
												</form>

											</td>
											<td>
												<a href="{{path('app.orders.showorder', {'id': order.id})}}" class="btn btn-primary ">Détail</a>
											</td>

										</tr>


									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>

		</div>
	</main>
{% endblock %}
